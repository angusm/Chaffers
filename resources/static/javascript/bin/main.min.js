!function e(t,r,n){function i(a,c){if(!r[a]){if(!t[a]){var u="function"==typeof require&&require;if(!c&&u)return u(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var s=r[a]={exports:{}};t[a][0].call(s.exports,function(e){var r=t[a][1][e];return i(r?r:e)},s,s.exports,e,t,r,n)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(t){n(this,e),this.username="",this.password="",this.djangoHTTP=t}return i(e,[{key:"login",value:function(){this.djangoHTTP.post("/players/login",{username:this.username,password:this.password}).then(function(e){console.log(e)})}},{key:"logout",value:function(){this.djangoHTTP.post("/players/logout").then(function(e){console.log(e)})}}]),e}();o.$inject=["djangoHTTP"],r.default=o},{}],2:[function(e,t,r){"use strict";function n(){return{restrict:"E",scope:{ability:"="},controller:function(){},controllerAs:"abilityVM",bindToController:!0,templateUrl:"/static/javascript/src/chaffers/directives/ability/ability.html"}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],3:[function(e,t,r){"use strict";function n(){return{restrict:"E",scope:{abilityModifier:"="},controller:function(){},controllerAs:"abilityModifierVM",bindToController:!0,templateUrl:"/static/javascript/src/chaffers/directives/ability_modifier_display/ability_modifier.html"}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],4:[function(e,t,r){"use strict";function n(){return{restrict:"E",scope:{selectedAbilities:"="},controller:i,controllerAs:"abilitySelectorVM",bindToController:!0,templateUrl:"/static/javascript/src/chaffers/directives/ability_selector/ability_selector.html"}}function i(e){e.getAll().then(this.setAbilities.bind(this))}function o(e){this.abilities=e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n,i.$inject=["Ability"],i.prototype.setAbilities=o},{}],5:[function(e,t,r){"use strict";function n(){var e={restrict:"E",scope:{attribute:"="},controller:function(){},controllerAs:"attributeVM",bindToController:!0,templateUrl:"/static/javascript/src/chaffers/directives/attribute/attribute.html"};return e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],6:[function(e,t,r){"use strict";function n(){return{restrict:"E",scope:{attributeModifier:"="},controller:function(){},controllerAs:"attributeModifierVM",bindToController:!0,templateUrl:"/static/javascript/src/chaffers/directives/attribute_modifier_display/attribute_modifier.html"}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],7:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){}function t(){if(!this.character||!this.character.getFinalAbilityModifier||!this.ability.id)return"";var e=this.character.getFinalAbilityModifier(this.ability,this.checkContexts);return(0,a.default)(e)}var r={restrict:"E",scope:{character:"=",ability:"=",checkContexts:"="},controller:e,controllerAs:"characterAbilityVM",bindToController:!0,templateUrl:"/static/javascript/src/chaffers/directives/character_ability/character_ability.html"};return e.prototype.getFinalModifier=t,r}Object.defineProperty(r,"__esModule",{value:!0}),r.default=i;var o=e("../../utility_functions/format_modifier_for_display"),a=n(o)},{"../../utility_functions/format_modifier_for_display":44}],8:[function(e,t,r){"use strict";function n(){function e(){}function t(){return this.character&&this.attribute.id?this.character.getModifiedAttributeValue(this.attribute):""}var r={restrict:"E",scope:{character:"=",attribute:"="},controller:e,controllerAs:"characterAttributeVM",bindToController:!0,templateUrl:"/static/javascript/src/chaffers/directives/character_attribute/character_attribute.html"};return e.prototype.getModifiedAttributeValue=t,r}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],9:[function(e,t,r){"use strict";function n(){function e(e,t){this.character=e(t,this.characterData)}var t={restrict:"E",scope:{characterData:"="},controller:["createPopulatedInstance","Character",e],controllerAs:"characterLinkFromDataVM",bindToController:!0,templateUrl:"/static/javascript/src/chaffers/directives/character_link/from_data/character_link.html"};return t}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],10:[function(e,t,r){"use strict";function n(){var e={restrict:"E",scope:{character:"="},controller:function(){},controllerAs:"characterLinkVM",bindToController:!0,templateUrl:"/static/javascript/src/chaffers/directives/character_link/generic/character_link.html"};return e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],11:[function(e,t,r){"use strict";function n(){function e(e,t){this.character=e(t,this.characterData)}var t={restrict:"E",scope:{characterData:"="},controller:["createPopulatedInstance","Character",e],controllerAs:"characterSheetFromDataVM",bindToController:!0,templateUrl:"/static/javascript/src/chaffers/directives/character_sheet/from_data/character_sheet_from_data.html"};return t}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],12:[function(e,t,r){"use strict";function n(){function e(e){this.setCharacter(new e(this.characterId))}function t(e){this.character=e}var r={restrict:"E",scope:{characterId:"="},controller:e,controllerAs:"characterSheetFromIdVM",bindToController:!0,templateUrl:"/static/javascript/src/chaffers/directives/character_sheet/from_id/character_sheet_from_id.html"};return e.$inject=["Character"],e.prototype.setCharacter=t,r}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],13:[function(e,t,r){"use strict";function n(){function e(e,t){this.selectedCheckContexts=[],this.selectedAbilities=[],e.getAll().then(this.setAbilities.bind(this)),t.getAll().then(this.setAttributes.bind(this)),window.character=this.character}function t(){return this.selectedAbilities}function r(){return this.selectedCheckContexts}function n(e){this.abilities=e}function i(e){this.attributes=e}var o={restrict:"E",scope:{character:"="},controller:e,controllerAs:"characterSheetVM",bindToController:!0,templateUrl:"/static/javascript/src/chaffers/directives/character_sheet/generic/character_sheet.html"};return e.$inject=["Ability","Attribute"],e.prototype.getSelectedAbilities=t,e.prototype.getSelectedCheckContexts=r,e.prototype.setAbilities=n,e.prototype.setAttributes=i,o}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],14:[function(e,t,r){"use strict";function n(){var e={restrict:"E",scope:{flaw:"="},controller:function(){},controllerAs:"flawVM",bindToController:!0,templateUrl:"/static/javascript/src/chaffers/directives/character_trait_display/flaw/flaw.html"};return e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],15:[function(e,t,r){"use strict";function n(){function e(){}var t={restrict:"E",scope:{characterTrait:"="},templateUrl:"/static/javascript/src/chaffers/directives/character_trait_display/generic/character_trait.html",controller:e,controllerAs:"characterTraitVM",bindToController:!0};return t}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],16:[function(e,t,r){"use strict";function n(){var e={restrict:"E",scope:{specialty:"="},templateUrl:"/static/javascript/src/chaffers/directives/character_trait_display/specialty/specialty.html",controller:function(){},controllerAs:"specialtyVM",bindToController:!0};return e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],17:[function(e,t,r){"use strict";function n(){var e={restrict:"E",scope:{selectedCheckContexts:"="},controller:i,controllerAs:"checkContextSelectorVM",bindToController:!0,templateUrl:"/static/javascript/src/chaffers/directives/check_context_selector/check_context_selector.html"};return e}function i(e){e.getAll().then(this.setCheckContexts.bind(this))}function o(e){this.checkContexts=e}Object.defineProperty(r,"__esModule",{value:!0}),i.$inject=["CheckContext"],i.prototype.setCheckContexts=o,r.default=n},{}],18:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){var e={restrict:"E",scope:{},controller:o,controllerAs:"diceRollerVM",bindToController:!0,templateUrl:"/static/javascript/src/chaffers/directives/dice_roller/dice_roller.html"};return e}function o(){this.dice=[new f.default,new f.default]}function a(){return this.dice}function c(){var e=0;return this.getDice().forEach(function(t){e+=t.getValue()}),e}function u(e){return this.getDice().indexOf(e)==this.getDice().length-1}function l(){this.getDice().forEach(function(e){e.roll()})}Object.defineProperty(r,"__esModule",{value:!0});var s=e("../../models/die"),f=n(s);o.prototype.getDice=a,o.prototype.getDiceTotal=c,o.prototype.isLastDie=u,o.prototype.roll=l,r.default=i},{"../../models/die":26}],19:[function(e,t,r){"use strict";function n(){var e={restrict:"E",scope:{die:"="},controller:i,controllerAs:"dieVM",bindToController:!0,templateUrl:"/static/javascript/src/chaffers/directives/die/die.html"};return e}function i(){}function o(){return"die-display-"+this.die.getValue()}Object.defineProperty(r,"__esModule",{value:!0}),i.prototype.getCSSClass=o,r.default=n},{}],20:[function(e,t,r){"use strict";function n(e,t){function r(e){this.djangoHTTP=e,this.setGame(new t(this.gameId))}function n(){this.getGame().getCurrentMap()}function i(){return this.game}function o(e){this.game=e}var a={restrict:"E",scope:{gameId:"="},controller:["djangoHTTP",r],controllerAs:"gameVM",bindToController:!0,templateUrl:"/static/javascript/src/chaffers/directives/game/game.html"};return r.prototype.getCurrentMap=n,r.prototype.getGame=i,r.prototype.setGame=o,a}Object.defineProperty(r,"__esModule",{value:!0}),n.$inject=["djangoHTTP","Game"],r.default=n},{}],21:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return{restrict:"E",scope:{gameBoardId:"="},controller:["$element","djangoHTTP",t],controllerAs:"gameBoardVM",bindToController:!0,templateUrl:"/static/javascript/src/chaffers/directives/game_board/game_board.html"};var t}Object.defineProperty(r,"__esModule",{value:!0});var o=(function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),e("../../../thrash_killer/thrash_killed_mouse")),a=(n(o),e("../../../thrash_killer/thrash_killer"));n(a);i.$inject=["Position2d"],r.default=i},{"../../../thrash_killer/thrash_killed_mouse":69,"../../../thrash_killer/thrash_killer":70}],22:[function(e,t,r){"use strict";function n(){return{restrict:"E",scope:{game:"="},controller:function(){},controllerAs:"gameToolkitVM",bindToController:!0,templateUrl:"/static/javascript/src/chaffers/directives/game_toolkit/game_toolkit.html"}}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],23:[function(e,t,r){"use strict";function n(){function e(){}var t={restrict:"E",scope:{template:"="},templateUrl:"/static/javascript/src/chaffers/directives/modal/modal.html",controller:e,controllerAs:"modalVM",bindToController:!0};return t}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],24:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e){this.player=void 0,this.password=void 0,this.username=void 0,this.djangoHTTP=e}function r(){return"undefined"==typeof this.player&&"object"===o(this.playerData)&&(this.player=(0,c.default)(e,this.playerData)),this.player}function n(){return"undefined"!=typeof this.getPlayer()}function i(){this.djangoHTTP.post("/players/login",{username:this.username,password:this.password}).then(this.completeLogin.bind(this))}function a(){this.djangoHTTP.post("/players/logout").then(this.completeLogout.bind(this))}var u={restrict:"E",scope:{playerData:"="},controller:["djangoHTTP",t],controllerAs:"playerPanelVM",bindToController:!0,templateUrl:"/static/javascript/src/chaffers/directives/player_panel/player_panel.html"};return t.prototype.getPlayer=r,t.prototype.login=i,t.prototype.logout=a,t.prototype.isPlayerLoggedIn=n,u}Object.defineProperty(r,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},a=e("../../../djangular/create_populated_instance"),c=n(a);i.$inject=["Player"],r.default=i},{"../../../djangular/create_populated_instance":47}],25:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var i=e("../djangular/main"),o=n(i),a=e("./controllers/login"),c=n(a),u=e("./models/factories/ability_factory"),l=n(u),s=e("./models/factories/ability_modifier_factory"),f=n(s),d=e("./models/factories/attribute_factory"),p=n(d),h=e("./models/factories/attribute_modifier_factory"),y=n(h),_=e("./models/factories/chaffers_model"),b=n(_),v=e("./models/factories/character_factory"),m=n(v),g=e("./models/factories/character_trait_factory"),j=n(g),O=e("./models/factories/check_context_factory"),w=n(O),k=e("./models/factories/flaw_factory"),M=n(k),P=e("./models/factories/game_board_position_factory"),E=n(P),C=e("./models/factories/game_character_factory"),T=n(C),A=e("./models/factories/game_factory"),F=n(A),S=e("./models/factories/game_map_factory"),D=n(S),N=e("./models/factories/player_factory"),R=n(N),x=e("./models/factories/specialty_factory"),U=n(x),H=e("./models/factories/text_block_factory"),V=n(H),I=e("./models/factories/user_factory"),L=n(I),$=e("./directives/ability/directive"),B=n($),G=e("./directives/ability_modifier/directive"),q=n(G),Y=e("./directives/ability_selector/directive"),W=n(Y),X=e("./directives/attribute/directive"),Q=n(X),z=e("./directives/attribute_modifier/directive"),J=n(z),Z=e("./directives/character_ability/directive"),K=n(Z),ee=e("./directives/character_attribute/directive"),te=n(ee),re=e("./directives/character_link/from_data/directive"),ne=n(re),ie=e("./directives/character_link/generic/directive"),oe=n(ie),ae=e("./directives/character_sheet/from_data/directive"),ce=n(ae),ue=e("./directives/character_sheet/from_id/directive"),le=n(ue),se=e("./directives/character_sheet/generic/directive"),fe=n(se),de=e("./directives/character_trait_display/generic/directive"),pe=n(de),he=e("./directives/character_trait_display/flaw/directive"),ye=n(he),_e=e("./directives/character_trait_display/specialty/directive"),be=n(_e),ve=e("./directives/check_context_selector/directive"),me=n(ve),ge=e("./directives/dice_roller/directive"),je=n(ge),Oe=e("./directives/die/directive"),we=n(Oe),ke=e("./directives/game/directive"),Me=n(ke),Pe=e("./directives/game_board/directive"),Ee=n(Pe),Ce=e("./directives/game_toolkit/directive"),Te=n(Ce),Ae=e("./directives/modal/directive"),Fe=n(Ae),Se=e("./directives/player_panel/directive"),De=n(Se),Ne=angular.module("chaffers",[o.default.name,"isteven-multi-select","ui.bootstrap"]);Ne.controller("loginController",c.default),Ne.factory("Ability",l.default),Ne.factory("AbilityModifier",f.default),Ne.factory("Attribute",p.default),Ne.factory("AttributeModifier",y.default),Ne.factory("ChaffersModel",b.default),Ne.factory("Character",m.default),Ne.factory("CharacterTrait",j.default),Ne.factory("CheckContext",w.default),Ne.factory("Flaw",M.default),Ne.factory("GameBoardPosition",E.default),Ne.factory("GameCharacter",T.default),Ne.factory("Game",F.default),Ne.factory("GameMap",D.default),Ne.factory("Player",R.default),Ne.factory("Specialty",U.default),Ne.factory("TextBlock",V.default),Ne.factory("User",L.default),Ne.directive("ability",B.default),Ne.directive("abilityModifier",q.default),Ne.directive("abilitySelector",W.default),Ne.directive("attribute",Q.default),Ne.directive("attributeModifier",J.default),Ne.directive("characterAbility",K.default),Ne.directive("characterAttribute",te.default),Ne.directive("characterLinkFromData",ne.default),Ne.directive("characterLink",oe.default),Ne.directive("characterSheetFromData",ce.default),Ne.directive("characterSheetFromId",le.default),Ne.directive("characterSheet",fe.default),Ne.directive("characterTrait",pe.default),Ne.directive("flaw",ye.default),Ne.directive("specialty",be.default),Ne.directive("checkContextSelector",me.default),Ne.directive("diceRoller",je.default),Ne.directive("die",we.default),Ne.directive("game",Me.default),Ne.directive("gameBoard",Ee.default),Ne.directive("gameToolkit",Te.default),Ne.directive("modal",Fe.default),Ne.directive("playerPanel",De.default),r.default=Ne},{"../djangular/main":57,"./controllers/login":1,"./directives/ability/directive":2,"./directives/ability_modifier/directive":3,"./directives/ability_selector/directive":4,"./directives/attribute/directive":5,"./directives/attribute_modifier/directive":6,"./directives/character_ability/directive":7,"./directives/character_attribute/directive":8,"./directives/character_link/from_data/directive":9,"./directives/character_link/generic/directive":10,"./directives/character_sheet/from_data/directive":11,"./directives/character_sheet/from_id/directive":12,"./directives/character_sheet/generic/directive":13,"./directives/character_trait_display/flaw/directive":14,"./directives/character_trait_display/generic/directive":15,"./directives/character_trait_display/specialty/directive":16,"./directives/check_context_selector/directive":17,"./directives/dice_roller/directive":18,"./directives/die/directive":19,"./directives/game/directive":20,"./directives/game_board/directive":21,"./directives/game_toolkit/directive":22,"./directives/modal/directive":23,"./directives/player_panel/directive":24,"./models/factories/ability_factory":27,"./models/factories/ability_modifier_factory":28,"./models/factories/attribute_factory":29,"./models/factories/attribute_modifier_factory":30,"./models/factories/chaffers_model":31,"./models/factories/character_factory":32,"./models/factories/character_trait_factory":33,"./models/factories/check_context_factory":34,"./models/factories/flaw_factory":35,"./models/factories/game_board_position_factory":36,"./models/factories/game_character_factory":37,"./models/factories/game_factory":38,"./models/factories/game_map_factory":39,"./models/factories/player_factory":40,"./models/factories/specialty_factory":41,"./models/factories/text_block_factory":42,"./models/factories/user_factory":43}],26:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(){n(this,e),this.value=void 0,this.sides=6,this.roll()}return i(e,[{key:"roll",value:function(){this.value=Math.round(Math.random()*(this.sides-1)+1)}},{key:"getValue",value:function(){return this.value}}]),e}();r.default=o},{}],27:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){return function(e){function t(e){n(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.createHasOneField("description","chaffers","TextBlock"),r.createCharField("displayName"),r}return o(t,e),c(t,[{key:"getDescription",value:function(){return this.description?this.description.formattedText:""}},{key:"getDisplayName",value:function(){return this.displayName}}],[{key:"getModelName",value:function(){return"Ability"}}]),t}(e)}Object.defineProperty(r,"__esModule",{value:!0});var c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();a.$inject=["ChaffersModel","TextBlock"],r.default=a},{}],28:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t,r){return function(e){function t(e){n(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.createHasOneField("ability","chaffers","Ability"),r.createNumberField("abilityId"),r.createHasManyField("checkContexts","chaffers","CheckContext"),r.createCharField("displayName"),r.createNumberField("modifier"),r}return o(t,e),c(t,[{key:"appliesToAbility",value:function(e){return this.abilityId==e.id||!(!this.ability||this.ability.id!=e.id)}},{key:"getModifier",value:function(){return this.modifier}},{key:"getDisplayName",value:function(){return this.displayName}},{key:"getCheckContexts",value:function(){return this.checkContexts}},{key:"getCheckContextIDs",value:function(){return this.getCheckContexts().map(function(e){return e.getID()})}},{key:"isContainedInCheckContexts",value:function(e){var t={};e.forEach(function(e){t[e.getID()]=!0});for(var r=this.getCheckContextIDs(),n=0;n<r.length;n++){var i=r[n];if(!t[i])return!1}return!0}}],[{key:"getModelName",value:function(){return"AbilityModifier"}}]),t}(e)}Object.defineProperty(r,"__esModule",{value:!0});var c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();a.$inject=["ChaffersModel","Ability","CheckContext"],r.default=a},{}],29:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){return function(e){function t(e){n(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.createNumberField("baseValue"),r.createHasOneField("description","chaffers","TextBlock"),r.createCharField("displayName"),r}return o(t,e),c(t,[{key:"getBaseValue",value:function(){return this.baseValue}},{key:"getDescription",value:function(){return this.description?this.description.formattedText:""}},{key:"getDisplayName",value:function(){return this.displayName}}],[{key:"getModelName",value:function(){return"Attribute"}}]),t}(e)}Object.defineProperty(r,"__esModule",{value:!0});var c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();a.$inject=["ChaffersModel","TextBlock"],r.default=a},{}],30:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){return function(e){function t(e){n(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.createCharField("displayName"),r.createNumberField("modifier"),r.createNumberField("attributeId"),r.createHasOneField("attribute","chaffers","Attribute"),r}return o(t,e),c(t,[{key:"getModifier",value:function(){return this.modifier}},{key:"getDisplayName",value:function(){return this.displayName}},{key:"appliesToAttribute",value:function(e){return this.attributeId==e.id||!(!this.attribute||this.attribute.id!=e.id)}}],[{key:"getModelName",value:function(){return"AttributeModifier"}}]),t}(e)}Object.defineProperty(r,"__esModule",{value:!0});var c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();a.$inject=["ChaffersModel","Attribute"],r.default=a},{}],31:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return function(e){function t(){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),c(t,[{key:"getViewURL",value:function(){return"/resources/view/"+this.constructor.getModelName()+"/"+this.id}}],[{key:"getDataQueryURL",value:function(){return"/resources"}}]),t}(e)}Object.defineProperty(r,"__esModule",{value:!0});var c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();a.$inject=["DjangoModel"],r.default=a},{}],32:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t,r,a){return function(e){function t(e){n(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.createHasManyField("flaws","chaffers","Flaw"),r.createHasManyField("specialties","chaffers","Specialty"),r.createHasOneField("description","chaffers","TextBlock"),r.createCharField("displayName"),r}return o(t,e),c(t,[{key:"getDisplayName",value:function(){return this.displayName}},{key:"getCharacterSheetURL",value:function(){return"/characters/view/"+this.id}},{key:"getDescription",value:function(){return null===typeof this.description?"":this.description.getText()}},{key:"getFlaws",value:function(){return this.flaws}},{key:"getSpecialties",value:function(){return this.specialties}},{key:"getAllSpecialtyAbilityModifiers",value:function(){var e=[];return this.getSpecialties().forEach(function(t){e=e.concat(t.getAbilityModifiers())}),e}},{key:"getAllFlawAbilityModifiers",value:function(){var e=[];return this.getFlaws().forEach(function(t){e=e.concat(t.getAbilityModifiers())}),e}},{key:"getAllAbilityModifiers",value:function(){return this.getAllSpecialtyAbilityModifiers().concat(this.getAllFlawAbilityModifiers())}},{key:"getAllAbilityModifiersForAbility",value:function(e){return this.getAllAbilityModifiers().filter(function(t){return t.appliesToAbility(e)})}},{key:"getAllSpecialtyAttributeModifiers",value:function(){var e=[];return this.getSpecialties().forEach(function(t){e=e.concat(t.getAttributeModifiers())}),e}},{key:"getAllFlawAttributeModifiers",value:function(){var e=[];return this.getFlaws().forEach(function(t){e=e.concat(t.getAttributeModifiers())}),e}},{key:"getAllAttributeModifiers",value:function(){return this.getAllSpecialtyAttributeModifiers().concat(this.getAllFlawAttributeModifiers())}},{key:"getAllAttributeModifiersForAttribute",value:function(e){return this.getAllAttributeModifiers().filter(function(t){return t.appliesToAttribute(e)})}},{key:"getFinalAbilityModifier",value:function(e,t){var r=0;return this.getAllAbilityModifiersForAbility(e).filter(function(e){return e.isContainedInCheckContexts(t)}).forEach(function(e){r+=e.modifier}),r}},{key:"getModifiedAttributeValue",value:function(e){var t=e.getBaseValue();return this.getAllAttributeModifiersForAttribute(e).forEach(function(e){t+=e.modifier}),t}}],[{key:"getModelName",value:function(){return"Character"}}]),t}(r)}Object.defineProperty(r,"__esModule",{value:!0});var c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();a.$inject=["Specialty","Flaw","ChaffersModel","TextBlock"],r.default=a},{}],33:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t,r,a){return function(e){function t(e){n(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.createCharField("displayName"),r.createHasOneField("description","chaffers","TextBlock"),r.createHasManyField("attributeModifiers","chaffers","AttributeModifier"),r.createHasManyField("abilityModifiers","chaffers","AbilityModifier"),r}return o(t,e),c(t,[{key:"getDisplayName",value:function(){return this.displayName}},{key:"getDescription",value:function(){return null===typeof this.description?"":this.description.getText()}},{key:"getAbilityModifiers",value:function(){return"undefined"==typeof this.abilityModifiers?[]:this.abilityModifiers;
}},{key:"getAttributeModifiers",value:function(){return"undefined"==typeof this.attributeModifiers?[]:this.attributeModifiers}}],[{key:"getModelName",value:function(){return"CharacterTrait"}}]),t}(e)}Object.defineProperty(r,"__esModule",{value:!0});var c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();a.$inject=["ChaffersModel","TextBlock","AttributeModifier","AbilityModifier"],r.default=a},{}],34:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){return function(e){function t(e){n(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.createHasOneField("description","chaffers","TextBlock"),r.createCharField("displayName"),r.createHasOneField("parent","chaffers","CheckContext"),r}return o(t,e),c(t,[{key:"getID",value:function(){return this.id}}],[{key:"getModelName",value:function(){return"CheckContext"}}]),t}(e)}Object.defineProperty(r,"__esModule",{value:!0});var c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();a.$inject=["ChaffersModel","TextBlock"],r.default=a},{}],35:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return function(e){function t(){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),c(t,null,[{key:"getModelName",value:function(){return"Flaw"}}]),t}(e)}Object.defineProperty(r,"__esModule",{value:!0});var c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();a.$inject=["CharacterTrait"],r.default=a},{}],36:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function c(e){var t=function(e){function t(e){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.createNumberField("x"),r.createNumberField("y"),r}return a(t,e),u(t,null,[{key:"getModelName",value:function(){return"GameBoardPosition"}}]),t}(e);return(0,d.default)(t,s.default),t}Object.defineProperty(r,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=e("../../../handies/structs/geometry/position_2d"),s=n(l),f=e("../../../djangular/implement"),d=n(f);c.$inject=["ChaffersModel"],r.default=c},{"../../../djangular/implement":56,"../../../handies/structs/geometry/position_2d":63}],37:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t,r){return function(e){function t(e){n(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.createHasOneField("game","chaffers","Game"),r.createHasOneField("position","chaffers","GameBoardPosition"),r}return o(t,e),c(t,null,[{key:"getModelName",value:function(){return"GameCharacter"}}]),t}(e)}Object.defineProperty(r,"__esModule",{value:!0});var c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();a.$inject=["Character","Game","GameBoardPosition"],r.default=a},{}],38:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return function(e){function t(e){n(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.createHasOneField("description","chaffers","TextBlock"),r.createCharField("displayName"),r.createHasManyField("gameMasters","chaffers","Player"),r}return o(t,e),c(t,[{key:"getDescription",value:function(){return null===typeof this.description?"":this.description.getText()}},{key:"getDisplayName",value:function(){return this.displayName}}],[{key:"getModelName",value:function(){return"Game"}}]),t}(e)}Object.defineProperty(r,"__esModule",{value:!0});var c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();a.$inject=["ChaffersModel"],r.default=a},{}],39:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){return function(e){function t(e){n(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.createHasOneField("game","chaffers","Game"),r}return o(t,e),c(t,null,[{key:"getModelName",value:function(){return"GameMap"}}]),t}(e)}Object.defineProperty(r,"__esModule",{value:!0});var c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();a.$inject=["ChaffersModel","Game"],r.default=a},{}],40:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t,r){return function(e){function t(e){n(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.createCharField("username"),r.createHasManyField("masteredGames","chaffers","Game"),r.createHasOneField("user","chaffers","User"),r}return o(t,e),c(t,[{key:"getUsername",value:function(){return this.username}},{key:"getUser",value:function(){return this.user}}],[{key:"getModelName",value:function(){return"Player"}}]),t}(e)}Object.defineProperty(r,"__esModule",{value:!0});var c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();a.$inject=["ChaffersModel","User","Game"],r.default=a},{}],41:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return function(e){function t(){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),c(t,null,[{key:"getModelName",value:function(){return"Specialty"}}]),t}(e)}Object.defineProperty(r,"__esModule",{value:!0});var c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();a.$inject=["CharacterTrait"],r.default=a},{}],42:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return function(e){function t(e){n(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.createCharField("formattedText"),r}return o(t,e),c(t,[{key:"getText",value:function(){return this.formattedText}}],[{key:"getModelName",value:function(){return"TextBlock"}}]),t}(e)}Object.defineProperty(r,"__esModule",{value:!0});var c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();a.$inject=["ChaffersModel"],r.default=a},{}],43:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return function(e){function t(e){n(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.createCharField("username"),r}return o(t,e),c(t,[{key:"getUsername",value:function(){return this.username}}],[{key:"getModelName",value:function(){return"User"}}]),t}(e)}Object.defineProperty(r,"__esModule",{value:!0});var c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();a.$inject=["ChaffersModel"],r.default=a},{}],44:[function(e,t,r){"use strict";function n(e){return e>0?"+"+e:String(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],45:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("./field"),c=n(a),u=e("./field_type"),l=n(u),s=function(){function e(t){i(this,e),this.id=t,this.fields_=new Map}return o(e,[{key:"createField_",value:function(e,t,r,n){var i=new c.default(e,t,this,r,n);this.fields_.set(e,i)}},{key:"createBooleanField",value:function(e){this.createField_(e,l.default.BOOLEAN)}},{key:"createCharField",value:function(e){this.createField_(e,l.default.CHAR)}},{key:"createDateField",value:function(e){this.createField_(e,l.default.DATE)}},{key:"createDateTimeField",value:function(e){this.createField_(e,l.default.DATE_TIME)}},{key:"createNumberField",value:function(e){this.createField_(e,l.default.NUMBER)}},{key:"createHasManyField",value:function(e,t,r){this.createField_(e,l.default.HAS_MANY,t,r)}},{key:"createHasOneField",value:function(e,t,r){this.createField_(e,l.default.HAS_ONE,t,r)}}],[{key:"getModelName",value:function(){throw new Error("Must be overridden in child classes")}}]),e}();r.default=s},{"./field":53,"./field_type":54}],46:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(){n(this,e)}return i(e,null,[{key:"snakeCaseToCamelCase",value:function(e){return e.replace(/(_\w)/g,function(e){var t=e[1];return t.toUpperCase()})}},{key:"camelCaseToSnakeCase",value:function(e){return e.replace(/([A-Z])/g,function(e){return"_"+e.toLowerCase()})}}]),e}();r.default=o},{}],47:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r=new e;return(0,a.default)(r,t),r}Object.defineProperty(r,"__esModule",{value:!0}),r.default=i;var o=e("./populate_instance"),a=n(o)},{"./populate_instance":58}],48:[function(e,t,r){"use strict";function n(e){return{getCSRFToken:function(){return e.get("csrftoken")}}}Object.defineProperty(r,"__esModule",{value:!0}),n.$inject=["$cookies"],r.default=n},{}],49:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(){this.instances=void 0,this.modelClass=void 0}function r(){return(0,a.default)(this.fields)?("all"==this.fields&&(this.fields=this.getModelClass().getDjangoFields()),this.fields):[]}function n(e){this.instances=e}function i(){return(0,a.default)(this.instances)||(this.getModelClass().getAll().then(this.setInstances.bind(this)),this.setInstances([])),this.instances}function o(){return(0,a.default)(this.modelClass)||(this.modelClass=e.get(this.modelName)),this.modelClass}var c={restrict:"E",scope:{modelName:"=",fields:"="},controller:t,controllerAs:"djangoModelTableVM",bindToController:!0,templateUrl:"/static/javascript/djangular/directives/django_model_table/django_model_table.html"};return t.prototype.getInstances=i,t.prototype.getFields=r,t.prototype.setInstances=n,t.prototype.getModelClass=o,c}Object.defineProperty(r,"__esModule",{value:!0});var o=e("../../../handies/functions/is_def"),a=n(o);i.$inject=["$injector"],r.default=i},{"../../../handies/functions/is_def":60}],50:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(){this.instance=void 0,this.modelClass=void 0}function r(){return(0,a.default)(this.fields)?("all"==this.fields&&(this.fields=this.getModelClass().getDjangoFields()),this.fields.indexOf("id")==-1&&(this.fields=["id"].concat(this.fields)),this.fields):["id"]}function n(){if(!(0,a.default)(this.instance)){var e=this.getModelClass();this.instance=new e,this.instance.id=this.modelId}return this.instance}function i(){return(0,a.default)(this.modelClass)||(this.modelClass=e.get(this.modelName)),this.modelClass}var o={restrict:"E",scope:{modelName:"=",fields:"=",modelId:"="},controller:t,controllerAs:"djangoModelViewVM",bindToController:!0,templateUrl:"/static/javascript/djangular/directives/django_model_view/django_model_view.html"};return t.prototype.getInstance=n,t.prototype.getFields=r,t.prototype.getModelClass=i,o}Object.defineProperty(r,"__esModule",{value:!0});var o=e("../../../handies/functions/is_def"),a=n(o);i.$inject=["$injector"],r.default=i},{"../../../handies/functions/is_def":60}],51:[function(e,t,r){"use strict";function n(e,t){return t.defaults.headers.post["X-CSRFToken"]=e.getCSRFToken(),t}Object.defineProperty(r,"__esModule",{value:!0}),n.$inject=["csrfService","$http"],r.default=n},{}],52:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function c(e){var t=function(t){function r(e){return i(this,r),o(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e))}return a(r,t),u(r,[{key:"getViewURL",value:function(){throw new Error("getViewURL must be overridden in child class.")}}],[{key:"createInstancesWithIDs",value:function(e){var t=this;return e.map(function(e){return new t(e)})}},{key:"getModelName",value:function(){throw new Error("Did not override getModelName. Should return name of model in Django.")}},{key:"getAll",value:function(){return this.getAllIDs().then(this.createInstancesWithIDs.bind(this))}},{key:"getAllIDs",value:function(){return e.post(this.getDataQueryURL()+"/get_all_ids",{model:this.getModelName()}).then(function(e){return e.data.ids})}},{key:"getDataQueryURL",value:function(){throw new Error("getDataQueryURL must be overridden in child Class")}}]),r}(s.default);return t}Object.defineProperty(r,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=e("./backend_model"),s=n(l);c.$inject=["djangoHTTP"],r.default=c},{"./backend_model":45}],53:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("../handies/functions/is_def"),c=n(a),u=e("./field_type"),l=n(u),s=e("./field_type_default_value"),f=n(s),d=e("./case_transform"),p=n(d),h=1e4,y=function(){function e(t,r,n){var o=arguments.length<=3||void 0===arguments[3]?void 0:arguments[3],a=arguments.length<=4||void 0===arguments[4]?void 0:arguments[4];i(this,e),this.instance_=void 0,this.relationClassModule_=o,this.relationClassName_=a,this.instance=n,this.name=t,this.type=r,this.value_=void 0,this.loaded_=!1,this.lastRequestTime_=0,this.socket_=void 0,this.defaultValue_=void 0,Object.defineProperty(n,this.name,{get:this.getValue.bind(this),set:this.setValue.bind(this)})}return o(e,[{key:"getValue",value:function(){return this.loaded_?this.value_:(this.makeLimitedGetRequest_(),this.getDefaultValue())}},{key:"getDefaultValue",value:function(){if(!(0,c.default)(this.defaultValue_)){if(this.type===l.default.HAS_ONE){var e=this.getRelationClass();return new e}this.defaultValue_=f.default[this.type]}return this.defaultValue_}},{key:"getRelationClass",value:function(){return angular.injector([this.relationClassModule_]).get(this.relationClassName_)}},{key:"setValue",value:function(e){this.value_=e,this.loaded_=!0,this.makeLimitedSetRequest_()}},{key:"makeLimitedGetRequest_",value:function(){var e=(new Date).getTime();e-this.lastRequestTime_>h&&(0,c.default)(this.instance.id)&&(this.lastRequestTime_=e,this.makeRequest_())}},{key:"makeLimitedSetRequest_",value:function(){}},{key:"makeRequest_",value:function(){this.closeExistingSocket_(),this.socket_=new WebSocket("ws://"+window.location.host),this.socket_.onmessage=this.handleSocketMessage_.bind(this),this.socket_.onopen=this.sendSocketRequest_.bind(this),this.socket_.readyState==WebSocket.OPEN&&this.socket_.onopen()}},{key:"isHasOneRelation",value:function(){return this.type===l.default.HAS_ONE}},{key:"isHasManyRelation",value:function(){return this.type===l.default.HAS_MANY}},{key:"handleSocketMessage_",value:function(e){var t=JSON.parse(e.data),r=void 0;if(this.isHasOneRelation()){var n=this.getRelationClass();r=t&&t.id?new n(t.id):null}else r=this.isHasManyRelation()?this.getRelationClass().createInstancesWithIDs(t.map(function(e){return e.id})):t;this.instance[this.name]=r}},{key:"sendSocketRequest_",value:function(){this.socket_.send(JSON.stringify({request:"GET",model_name:this.instance.constructor.getModelName(),id:this.instance.id,name:p.default.camelCaseToSnakeCase(this.name)}))}},{key:"closeExistingSocket_",value:function(){(0,c.default)(this.socket_)&&this.socket_.close()}},{key:"instance",get:function(){return this.instance_},set:function(e){this.instance_!=e&&(this.instance_=e,this.makeLimitedGetRequest_())}}]),e}();r.default=y},{"../handies/functions/is_def":60,"./case_transform":46,"./field_type":54,"./field_type_default_value":55}],54:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={BOOLEAN:"boolean",CHAR:"char",DATE:"date",DATE_TIME:"date-time",NUMBER:"number",HAS_MANY:"has-many",HAS_ONE:"has-one"};r.default=n},{}],55:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var i=e("./field_type"),o=n(i),a={};a[o.default.BOOLEAN]=void 0,a[o.default.CHAR]="",a[o.default.DATE]=new Date(0),a[o.default.DATE_TIME]=new Date(0),a[o.default.NUMBER]=void 0,a[o.default.HAS_MANY]=[],a[o.default.HAS_ONE]={},r.default=a},{"./field_type":54}],56:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(e,t){a(t).filter(function(r){(0,d.default)(t[r])&&!(0,s.default)(e[r])&&(e[r]=t[r])}),(0,s.default)(t.prototype)&&o(e,t.prototype)}function a(e){return[].concat(i(c(e)),i(u(e)))}function c(e){return Object.getOwnPropertyNames(e)}function u(e){return Object.getOwnPropertyNames(Object.getPrototypeOf(e))}Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var l=e("../handies/functions/is_def"),s=n(l),f=e("../handies/functions/is_function"),d=n(f)},{"../handies/functions/is_def":60,"../handies/functions/is_function":61}],57:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var i=e("./django_model"),o=n(i),a=e("./csrf_service"),c=n(a),u=e("./django_http"),l=n(u),s=e("./directives/django_model_table/django_model_table"),f=n(s),d=e("./directives/django_model_view/django_model_view"),p=n(d),h=angular.module("djangular",["ngCookies"]);h.factory("DjangoModel",o.default),h.factory("csrfService",c.default),h.factory("djangoHTTP",l.default),h.directive("djangoModelTable",f.default),h.directive("djangoModelView",p.default),r.default=h},{"./csrf_service":48,"./directives/django_model_table/django_model_table":49,"./directives/django_model_view/django_model_view":50,"./django_http":51,"./django_model":52}],58:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof l.default))throw new Error("Can only populate BackendModel instances");if(!(0,y.default)(t))throw new Error("Data for population must be a non-null object");var r=e.constructor;return Object.keys(t).forEach(function(n){var i=f.default.snakeCaseToCamelCase(n),c=t[n];e.hasOwnProperty(i)&&(r.isHasOneRelation(i)?a(e,i,c):r.isHasManyRelation(i)?o(e,i,c):e[i]=c)}),e}function o(e,t,r){(0,p.default)(r)&&(e[t]=r.filter(function(e){return(0,y.default)(e)}).map(function(r){return c(e,t,r)}))}function a(e,t,r){(0,y.default)(r)&&(e[t]=c(e,t,r))}function c(e,t,r){var n=e.constructor,o=n.getRelatedClass(t);return i(new o,r)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=i;var u=e("./backend_model"),l=n(u),s=e("./case_transform"),f=n(s),d=e("../handies/functions/is_array"),p=n(d),h=e("../handies/functions/is_non_null_object"),y=n(h)},{"../handies/functions/is_array":59,"../handies/functions/is_non_null_object":62,"./backend_model":45,"./case_transform":46}],59:[function(e,t,r){"use strict";function n(e){return"object"===("undefined"==typeof e?"undefined":i(e))&&"number"==typeof e.length}Object.defineProperty(r,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};r.default=n},{}],60:[function(e,t,r){"use strict";function n(e){return"undefined"!=typeof e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],61:[function(e,t,r){"use strict";function n(e){return"function"==typeof e}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],62:[function(e,t,r){"use strict";function n(e){return"object"===("undefined"==typeof e?"undefined":i(e))&&null!==e}Object.defineProperty(r,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};r.default=n},{}],63:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(t,r){n(this,e),this.x=t,this.y=r}return i(e,[{key:"getX",value:function(){return this.x}},{key:"getY",value:function(){return this.y}},{key:"modulo",value:function(t){return new e(this.getX()%t,this.getY()%t)}},{key:"scale",value:function(t){return new e(this.getX()*t,this.getY()*t)}},{key:"translate",value:function(t){return new e(this.getX()+t.getX(),this.getY()+t.getY())}},{key:"difference",value:function(e){return this.translate(e.invert())}},{key:"invert",value:function(){return new e((-this.getX()),(-this.getY()))}}]),e}();r.default=o},{}],64:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(n)},l=e("./dynamic_default"),s=n(l),f=e("../../functions/is_array"),d=n(f),p=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,function(){return[]}))}return a(t,e),c(t,[{key:"pushOnArray",value:function(e,t){this.get(e).push(t)}},{key:"removeFromArray",value:function(e,t){var r=this.get(e);t.indexOf(t)!=-1&&r.splice(r.indexOf(t),1)}},{key:"set",value:function(e,r){if(!(0,d.default)(r))throw new Error("Value is not an Array");u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"set",this).call(this,e,r)}}]),t}(s.default);r.default=p},{"../../functions/is_array":59,"./dynamic_default":65}],65:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var c=function(){
function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(n)},l=e("../../functions/is_def"),s=n(l),f=e("./map_wrapper"),d=n(f),p=function(e){function t(e){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.defaultGenerator_=e,r}return a(t,e),c(t,[{key:"get",value:function(e){var r=u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"get",this).call(this,e);if((0,s.default)(r))return r;var n=this.defaultGenerator_(e);return this.set(e,n),n}}]),t}(d.default);r.default=p},{"../../functions/is_def":60,"./map_wrapper":66}],66:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(){n(this,e),this.map_=new Map}return i(e,[{key:"clear",value:function(){return this.map_.clear.apply(this,arguments)}},{key:"delete",value:function(){return this.map_.delete.apply(this,arguments)}},{key:"entries",value:function(){return this.map_.entries.apply(this,arguments)}},{key:"forEach",value:function(){return this.map_.forEach.apply(this,arguments)}},{key:"get",value:function(){return this.map_.get.apply(this,arguments)}},{key:"has",value:function(){return this.map_.has.apply(this,arguments)}},{key:"keys",value:function(){return this.map_.keys.apply(this,arguments)}},{key:"set",value:function(){return this.map_.set.apply(this,arguments)}},{key:"values",value:function(){return this.map_.values.apply(this,arguments)}},{key:Symbol.iterator,value:function(){return this.map_[Symbol.iterator].apply(this,arguments)}},{key:"size",get:function(){return this.map_.size}}]),e}();r.default=o},{}],67:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=e("./chaffers/main");n(i)},{"./chaffers/main":25}],68:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("./thrash_killer_run_count"),c=n(a),u=function(){function e(t){var r=arguments.length<=1||void 0===arguments[1]?c.default.INDEFINITE:arguments[1];i(this,e),this.fn=t,this.runCount=r}return o(e,[{key:"decrementRunCount",value:function(){this.isRunningIndefinitely()||this.runCount--}},{key:"isFinished",value:function(){return!this.isRunningIndefinitely()&&this.runCount<=0}},{key:"isRunningIndefinitely",value:function(){return this.runCount===c.default.INDEFINITE}},{key:"run",value:function(){this.isFinished()||(this.fn(),this.decrementRunCount())}},{key:"stop",value:function(){this.runCount=0}}]),e}();r.default=u},{"./thrash_killer_run_count":71}],69:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("../handies/structs/maps/array"),c=n(a),u=e("./batched_function"),l=n(u),s=e("../handies/structs/geometry/position_2d"),f=n(s),d=Object.freeze({LEFT_MOUSE_DOWN:"left-mouse-down",LEFT_MOUSE_UP:"left-mouse-up",MOUSE_DRAG:"mouse-drag",MOUSE_MOVE:"mouse-move"}),p=function(){function e(){var t=this;i(this,e),this.lastPosition=new f.default,this.lastDragPosition=new f.default,this.currentPosition=new f.default,this.isDragging=!1,this.eventsToRun=[],this.batchedFunctions=new c.default,jQuery(document).bind("mousedown",function(e){t.handleMouseDownEvent(e)}),jQuery(document).bind("mousemove",function(e){t.handleMouseMoveEvent(e)}),jQuery(document).bind("mouseup",function(e){t.handleMouseUpEvent(e)})}return o(e,[{key:"register",value:function(e,t,r){this.batchedFunctions=new l.default(e,r)}},{key:"onLeftMouseDown",value:function(e,t){this.register(e,d.LEFT_MOUSE_DOWN,t)}},{key:"onLeftMouseUp",value:function(e,t){this.register(e,d.LEFT_MOUSE_UP,t)}},{key:"onMouseDrag",value:function(e,t){this.register(e,d.MOUSE_DRAG,t)}},{key:"onMouseMove",value:function(e,t){this.register(e,d.MOUSE_MOVE,t)}},{key:"handleMouseMoveEvent",value:function(e){this.currentPosition=new f.default(e.pageX,e.pageY)}},{key:"handleMouseDownEvent",value:function(e){this.startDragging(),this.lastDragPosition=new f.default(e.pageX,e.pageY),this.eventsToRun.push(d.LEFT_MOUSE_DOWN)}},{key:"handleMouseUpEvent",value:function(e){this.stopDragging(),this.eventsToRun.push(d.LEFT_MOUSE_UP)}},{key:"update",value:function(){var e=this;this.eventsToRun.map(function(t){e.batchedFunctions.get(t).map(function(r){r.run(e.getParamsForEvent(t))})}),this.lastDragPosition=this.currentPosition,this.lastPosition=this.currentPosition}},{key:"getParamsForEvent",value:function(e){switch(e){case d.LEFT_MOUSE_DOWN:return this.currentPosition;case d.LEFT_MOUSE_UP:return this.currentPosition;case d.MOUSE_DRAG:return this.lastDragPosition.difference(this.currentPosition);case d.MOUSE_MOVE:return this.lastPosition.difference(this.currentPosition)}}},{key:"isDragging",value:function(){return this.dragging}},{key:"startDragging",value:function(){this.dragging=!0}},{key:"stopDragging",value:function(){this.dragging=!1}}]),e}();r.default=new p},{"../handies/structs/geometry/position_2d":63,"../handies/structs/maps/array":64,"./batched_function":68}],70:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("../handies/structs/maps/array"),c=n(a),u=e("./batched_function"),l=n(u),s=e("./thrash_killed_mouse"),f=n(s),d=e("./thrash_killer_step"),p=n(d),h=e("./thrash_killer_step_order"),y=n(h),_=function(){function e(){i(this,e),this.batchedFunctions=new c.default,this.runLoop()}return o(e,[{key:"runBatchedFunction",value:function(e,t){t.isFinished()?this.batchedFunctions.removeFromArray(e,t):t.run()}},{key:"runLoop",value:function(){var e=this;f.default.update(),y.default.map(function(t){e.batchedFunctions.get(t).map(function(r){e.runBatchedFunction(t,r)})}),window.requestAnimationFrame(function(){e.runLoop()})}},{key:"preRender",value:function(e,t){return this.register(e,p.default.PRE_RENDER,t)}},{key:"render",value:function(e,t){return this.register(e,p.default.RENDER,t)}},{key:"postRender",value:function(e,t){return this.register(e,p.default.POST_RENDER,t)}},{key:"register",value:function(e,t,r){var n=new l.default(e,r);return this.batchedFunctions.pushOnArray(t,n),n}}]),e}();r.default=_},{"../handies/structs/maps/array":64,"./batched_function":68,"./thrash_killed_mouse":69,"./thrash_killer_step":72,"./thrash_killer_step_order":73}],71:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=Object.freeze({INDEFINITE:"indefinite"})},{}],72:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=Object.freeze({PRE_RENDER:"pre-render",RENDER:"render",POST_RENDER:"post-render"})},{}],73:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var i=e("./thrash_killer_step"),o=n(i);r.default=Object.freeze([o.default.PRE_RENDER,o.default.RENDER,o.default.POST_RENDER])},{"./thrash_killer_step":72}]},{},[67]);
//# sourceMappingURL=maps/main.min.js.map
